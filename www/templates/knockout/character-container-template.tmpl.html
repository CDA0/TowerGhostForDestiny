<div class="container" id="charactersContainerParent" data-bind="style: { width: ccWidth }">
    <div class="container-fluid" id="charactersContainer" style="display:none" data-bind="visible: orderedCharacters().length > 0, moveItem: true">
        <div class="row" data-bind="foreach: { data: orderedCharacters, as: 'character' }">
            <div class="profile" data-bind="css: $parent.columnMode(character), attr:{id: character.id}">
                <div class="character">
                    <div class="character-box" data-bind="style: { backgroundImage: background }, css: character.id, refreshableEmblem: true, fastclick: character.refresh, clickBubble: false">
                        <img class="emblem" data-bind="itemImageHandler: icon">
                        <div class="class" data-bind="text: classType"></div>
                        <div class="level" data-bind="visible: level() != ''">
                            <div class="light" data-bind="text: level"></div>
                            <div class="power" data-bind="text: character.powerLevel"></div>
                        </div>
						<div class="statsTool" data-bind="visible: id != 'Vault', click: toggleStats, clickBubble: false">
							<i class="fa fa-angle-double-down font-larger-4"></i>
						</div>
                        <div class="progression" data-bind="visible: id != 'Vault', style: { width: character.percentToNextLevel() + '%' }">&nbsp;</div>
                        <div class="row stats" data-bind="with: stats, visible: statsShowing">
                            <div class="btn-group col-xs-24">
								<a data-bind="click: character.setPane('info'), clickBubble: false, css: character.statsPane() == 'info' ? 'btn-primary' : 'btn-default'" class="btn btn-default btn-sm col-xs-8 text-center"><i class="fa fa-info"></i> Info</a>
								<a data-bind="click: character.setPane('tools'), clickBubble: false, css: character.statsPane() == 'tools' ? 'btn-primary' : 'btn-default'"class="btn btn-default btn-sm col-xs-8 text-center"><i class="fa fa-wrench"></i> Tools</a>
								<a data-bind="click: character.setPane('more'), clickBubble: false, css: character.statsPane() == 'more' ? 'btn-primary' : 'btn-default'" class="btn btn-default btn-sm col-xs-8 text-center"><i class="fa fa-bars"></i> More</a>
							</div>
							<div data-bind="if: character.statsPane() == 'info' && character.statsShowing()">
								<div class="col-xs-10 text-left skillStatRow">
									<div>
										<span class="font-bold" data-bind="text: $root.activeText().armor">Armor</span>
										<span data-bind="text: STAT_ARMOR.value"></span>
									</div>
									<div>
										<span class="font-bold" data-bind="text: $root.activeText().agility">Agility</span>
										<span data-bind="text: STAT_AGILITY.value"></span>
									</div>
									<div>
										<span class="font-bold" data-bind="text: $root.activeText().recovery">Recovery</span>
										<span data-bind="text: STAT_RECOVERY.value"></span>
									</div>
								</div>
								<div class="col-xs-14 text-left">
									<span class="font-bold">Equipped Tier</span> <span data-bind="text: character.equippedTier" title="Current tier possible for Armor Equipped"></span><br>
									<span class="font-bold">Equipped CSP</span> <span data-bind="text: character.sumCSP" title="Combined Stat Points for Armor Equipped"></span><br>
									<span class="font-bold">Potential Tier</span> <span data-bind="text: character.potentialTier" title="Stat Points needed to reach Theoretical Tier"></span><br>
									<span class="font-bold">Points Needed</span> <span data-bind="text: (character.potentialTier() * tgd.DestinySkillTier)" title="Stat Points needed to reach Theoretical Tier"></span><br>
									<span class="font-bold">CSP at <span data-bind="text: tgd.DestinyLightCap"></span></span> <span data-bind="text: character.potentialCSP" title="Stat Points the Equipped gear can reach if infused to max light"></span>
								</div>
								<div class="col-xs-24 text-center">
									<div data-bind="foreach: { data: tgd.DestinyArmorStats, as: 'stat' }" class="skillStatRow">
										<div>
											<span class="font-bold" data-bind="text: stat.statName"></span>
											<span data-bind="text: character.equippedStats()[stat.statName]"></span>
											<span data-bind="css: 'stat_' + stat.statHash" class="fa skill"></span>
											<span data-bind="text: 'T' + Math.floor(character.equippedStats()[stat.statName] / tgd.DestinySkillTier)"></span>
											( <span data-bind="text: character.getCooldown(Math.floor(character.equippedStats()[stat.statName] / tgd.DestinySkillTier), stat.statHash)"></span> )
										</div>
									</div>
								</div>								
							</div>
							<div data-bind="if: character.statsPane() == 'tools' && character.statsShowing()">
								<div class="col-xs-24 text-center">
									<span class="font-bold col-xs-24 statsToolTitle">Equip Gear With Highest <button data-bind="tooltip: true, click: function(){ return false; }, clickBubble: false" type="button" class="btn btn-sm btn-info" data-toggle="tooltip" data-trigger="click hover space" data-placement="auto" title="Pulls gear from anywhere in your account to equip with the highest stat desirable."><i class="fa fa-question-circle"></i></button></span>
									<div class="btn-group col-xs-24">
										<a title="Automatically equip gear with the most Intellect" data-bind="text: $root.activeText().inte, click: character.equipHighest('Intellect'), clickBubble: false" class="btn btn-default btn-sm col-xs-8">Int</a>
										<a title="Automatically equip gear with the most Discipline" data-bind="text: $root.activeText().disc, click: character.equipHighest('Discipline'), clickBubble: false" class="btn btn-default btn-sm col-xs-8">Disc</a>
										<a title="Automatically equip gear with the most Strength" data-bind="text: $root.activeText().str, click: character.equipHighest('Strength'), clickBubble: false" class="btn btn-default btn-sm col-xs-8">Str</a>
										<a title="Automatically equip gear with the highest Light Level" data-bind="text: $root.activeText().light, click: character.equipHighest('Light'), clickBubble: false" class="btn btn-default btn-sm col-xs-12">Light</a>
										<a title="Automatically equip gear with the highest Combined Stat Points" data-bind="text: $root.activeText().most_points, click: character.equipHighest('All'), clickBubble: false" class="btn btn-default btn-sm col-xs-12">Points</a>
									</div>
									<span class="font-bold col-xs-24 statsToolTitle">Armor Set Builder <button data-bind="tooltip: true, click: function(){ return false; }, clickBubble: false" type="button" class="btn btn-sm btn-info" data-toggle="tooltip" data-trigger="click hover space" data-placement="auto" title="<strong>Top 3</strong>-Report of stat combinations available for the top 3 items by points.<br><strong>Character</strong>-Report of stat combinations available based on all the items in that character.<br><strong>Custom</strong>-Explore all armor combinations possible<br><strong>T12 Build</strong>-Explore Tier-12 combinations possible"><i class="fa fa-question-circle"></i></button></span>
									<div class="btn-group col-xs-24">
										<a title="Analyzes the top 3 armor pieces sorted by points in your inventory to find the highest tier sets you can currently create" data-bind="click: character.equipHighest('OptimizedBest'), clickBubble: false" class="btn btn-default btn-sm col-xs-12 text-center">Top 3</a>
										<a title="Analyzes all your armor in your inventory to find the highest tier sets you can currently create" data-bind="click: character.equipHighest('Best'), clickBubble: false" class="btn btn-default btn-sm col-xs-12 text-center">Character</a>
										<a title="Allows you to explore armor sets to find the highest tier sets you can currently create" data-bind="click: character.equipHighest('Custom'), clickBubble: false" class="btn btn-default btn-sm col-xs-12 text-center">Custom</a>
										<a title="Allows you to explore armor sets available that reach the max tier possible in game" data-bind="click: character.equipHighest('MaxLight'), clickBubble: false, text: 'T' + tgd.maxTierPossible + ' Build'" class="btn btn-default btn-sm col-xs-12 text-center"></a>
									</div>
								</div>
							</div>
							<div data-bind="if: character.statsPane() == 'more' && character.statsShowing()">
								<span class="font-bold col-xs-24 statsToolTitle text-center">
									Optimize Equipped Gear 
									<button data-bind="tooltip: true, click: function(){ return false; }, clickBubble: false" type="button" class="btn btn-sm btn-info" data-toggle="tooltip" data-trigger="click hover space" data-placement="bottom" title="<strong>Equipped</strong> Lists the stat combinations available for the currently equipped gear.<br><strong>Minus Other</strong> Lists the stat combinations available for your currently equipped gear and all your artifacts, ghosts and class items."><i class="fa fa-question-circle"></i></button>
								</span>
								<div class="btn-group col-xs-24">
									<a title="Analyzes the equipped gear for the best stat distributions" data-bind="click: character.optimizeGear('Equipped'), clickBubble: false" class="btn btn-default btn-sm col-xs-12 text-center">Refresh</a>
									<a title="Analyzes the equipped gear minus other armor for the best stat distributions" data-bind="click: character.optimizeGear('Minus Other'), clickBubble: false" class="btn btn-default btn-sm col-xs-12 text-center">Minus Other</a>									
								</div>
								<div class="btn-group col-xs-24" data-bind="with: character.activeBestSets">
									<ul data-bind="foreach: { data: $data, as: 'combo' }" class="list-group text-left" style="margin-bottom:0;">
										<li class="list-group-item" style="padding: 2px">
											<span class="font-smaller-2">
												<input type="button" class="btn btn-sm btn-default" value="View" data-bind="click: character.viewCombo(combo)">
												T<span data-bind="text: Math.floor(combo.score)"></span>
												<span data-bind="text: combo.statTiers.replace(/<br>/g,' / ')"></span>
											</span>
										</li>
									</ul>
								</div>
							</div>
                        </div>
                    </div>
                </div>
                <div class="inventory">
                    <div class="items" data-type="item">
                        <!-- ko foreach: { data: $root.activeLayouts, as: 'layout' } -->
                        <!-- ko if: layout.isVisible(character)() -->
                        <div>
                            <div class="title2" data-bind="visible: $root.searchKeyword() == '', refreshableSection: true">
                                <strong data-bind="text: layout.titleText(character)"></strong>
                                <span data-bind="html: layout.countText(character)"></span>
                                <div class="titleRefresh" data-bind="visible: isMobile">
                                    <!-- ko if: (layout.headerText == 'inventory_weapons' || layout.headerText == 'inventory_armor') -->
                                    <i title="Click to select multiple items to transfer in one go." class="fa fa-clone" data-bind="fastclick: $root.startMultiSelect, clickBubble: false"></i>
                                    <!--/ko  -->
                                    <i title="Click to refresh this area" class="fa fa-refresh text-success" data-bind="fastclick: character.reloadBucket, clickBubble: false"></i>
                                </div>
                            </div>
                            <div class="sections" data-bind="template: { name: $root.sectionsTemplate, foreach: layout.activeBucketTypes, as: 'bucketType' }"></div>
                        </div>
                        <!--/ko  -->
                        <!--/ko  -->
                    </div>
                </div>
            </div>
            <!-- ko if: $index() == 1 -->
            <div class="clearfix hidden-xs visibile-sm-block hidden-md hidden-lg" data-bind="visible: tgd.defaults.smColumn == $root.smColumn()"></div>
            <!--/ko  -->
            <!-- ko if: $index() == 2 -->
            <div class="clearfix hidden-xs hidden-sm visibile-md-block hidden-lg" data-bind="visible: tgd.defaults.mdColumn == $root.mdColumn()"></div>
            <!--/ko  -->
        </div>
    </div>
</div>